## API Report File for "@svta/cml-cmcd"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { CmObjectType } from '@svta/cml-cta/CmObjectType.js';
import { CmStreamingFormat } from '@svta/cml-cta/CmStreamingFormat.js';
import { CmStreamType } from '@svta/cml-cta/CmStreamType.js';
import type { Request as Request_2 } from '@svta/cml-utils/Request.js';
import type { SfItem } from '@svta/cml-structured-field-values/SfItem.js';
import type { SfToken } from '@svta/cml-structured-field-values/SfToken.js';
import type { ValueOf } from '@svta/cml-utils/ValueOf.js';
import type { ValueOrArray } from '@svta/cml-utils/ValueOrArray.js';

// @beta
export function appendCmcdHeaders(headers: Record<string, string>, cmcd: Cmcd, options?: CmcdEncodeOptions): Record<string, string>;

// @beta
export function appendCmcdQuery(url: string, cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @beta
export type Cmcd = {
    [index: CmcdCustomKey]: CmcdValue;
    br?: number;
    d?: number;
    ot?: CmcdObjectType;
    tb?: number;
    bl?: number;
    dl?: number;
    mtp?: number;
    nor?: ValueOrArray<string | SfItem>;
    nrr?: string;
    su?: boolean;
    cid?: string;
    pr?: number;
    sf?: CmcdStreamingFormat;
    sid?: string;
    st?: CmcdStreamType;
    v?: number;
    bs?: boolean;
    rtp?: number;
};

// @beta
export const CMCD_COMMON_KEYS: readonly ["ab", "bg", "bl", "br", "bs", "bsd", "cdn", "cid", "cs", "df", "ec", "lab", "lb", "ltc", "msd", "mtp", "pb", "pr", "pt", "sf", "sid", "sn", "st", "sta", "tab", "tb", "tbl", "tpb", "ts", "v"];

// @beta
export const CMCD_DEFAULT_TIME_INTERVAL = 30;

// @beta
export const CMCD_EVENT_KEYS: readonly ["e"];

// @beta
export const CMCD_EVENT_MODE = "event";

// @beta
export const CMCD_FORMATTER_MAP: Record<string, CmcdFormatter>;

// @beta
export const CMCD_HEADERS = "headers";

// @beta @deprecated
export const CMCD_JSON = "json";

// @beta
export const CMCD_KEYS: CmcdKey[];

// @beta
export const CMCD_OBJECT = "CMCD-Object";

// @beta
export const CMCD_PARAM = "CMCD";

// @beta
export const CMCD_QUERY = "query";

// @beta
export const CMCD_REQUEST = "CMCD-Request";

// @beta
export const CMCD_REQUEST_KEYS: readonly ["d", "dl", "nor", "ot", "rtp", "su"];

// @beta
export const CMCD_REQUEST_MODE = "request";

// @beta
export const CMCD_RESPONSE_KEYS: readonly ["cmsdd", "cmsds", "rc", "smrt", "ttfb", "ttfbb", "ttlb", "url"];

// @beta
export const CMCD_RESPONSE_MODE = "response";

// @beta
export const CMCD_SESSION = "CMCD-Session";

// @beta
export const CMCD_STATUS = "CMCD-Status";

// @beta
export const CMCD_V1 = 1;

// @beta
export const CMCD_V1_KEYS: readonly ["bl", "br", "bs", "cid", "d", "dl", "mtp", "nor", "nrr", "ot", "pr", "rtp", "sf", "sid", "st", "su", "tb", "v"];

// @beta
export const CMCD_V2 = 2;

// @beta
export type CmcdCustomKey = `${string}-${string}`;

// @beta
export type CmcdData = Cmcd & CmcdRequest & CmcdEvent & CmcdResponse;

// @beta
export type CmcdEncodeOptions = {
    version?: number;
    reportingMode?: CmcdReportingMode;
    formatters?: Partial<CmcdFormatterMap>;
    customHeaderMap?: Partial<CmcdHeaderMap>;
    filter?: (key: CmcdKey) => boolean;
    baseUrl?: string;
};

// @beta @deprecated
export const CmcdEncoding: typeof CmcdTransmissionMode;

// @beta (undocumented)
export type CmcdEncoding = ValueOf<typeof CmcdEncoding>;

// @beta
export type CmcdEvent = Omit<CmcdRequest, CmcdEventExcludedKeys> & {
    e?: CmcdEventType;
};

// @beta
export type CmcdEventExcludedKeys = 'bs' | 'bsd' | 'cmsdd' | 'cmsds' | 'd' | 'dl' | 'nor' | 'ot' | 'rc' | 'rtp' | 'smrt' | 'su' | 'ttfbb' | 'ttlb' | 'url';

// @beta
export const CmcdEventType: {
    readonly PLAY_STATE: "ps";
    readonly ERROR: "e";
    readonly TIME_INTERVAL: "t";
    readonly CONTENT_ID: "c";
    readonly BACKGROUNDED_MODE: "b";
    readonly MUTE: "m";
    readonly UNMUTE: "um";
    readonly PLAYER_EXPAND: "pe";
    readonly PLAYER_COLLAPSE: "pc";
};

// @beta (undocumented)
export type CmcdEventType = ValueOf<typeof CmcdEventType>;

// @beta
export type CmcdFormatter = (value: CmcdValue, options: CmcdFormatterOptions) => number | ValueOrArray<string> | ValueOrArray<SfItem>;

// @beta
export type CmcdFormatterMap = Record<CmcdKey, CmcdFormatter>;

// @beta
export type CmcdFormatterOptions = {
    version: number;
    reportingMode: CmcdReportingMode;
    baseUrl?: string;
};

// @beta @deprecated
export const CmcdFormatters: Record<string, CmcdFormatter>;

// @beta
export const CmcdHeaderField: {
    readonly OBJECT: typeof CMCD_OBJECT;
    readonly REQUEST: typeof CMCD_REQUEST;
    readonly SESSION: typeof CMCD_SESSION;
    readonly STATUS: typeof CMCD_STATUS;
};

// @beta (undocumented)
export type CmcdHeaderField = ValueOf<typeof CmcdHeaderField>;

// @beta
export type CmcdHeaderMap = Record<CmcdHeaderField, CmcdKey[]>;

// @beta @deprecated
export type CmcdHeadersMap = Record<CmcdHeaderField, CmcdKey[]>;

// @beta
export type CmcdKey = keyof CmcdData;

// @beta
export const CmcdObjectType: typeof CmObjectType;

// @beta (undocumented)
export type CmcdObjectType = CmObjectType;

// @beta
export const CmcdPlayerState: {
    readonly STARTING: "s";
    readonly PLAYING: "p";
    readonly SEEKING: "k";
    readonly REBUFFERING: "r";
    readonly PAUSED: "a";
    readonly WAITING: "w";
    readonly ENDED: "e";
    readonly FATAL_ERROR: "f";
    readonly QUIT: "q";
    readonly PRELOADING: "d";
};

// @beta (undocumented)
export type CmcdPlayerState = ValueOf<typeof CmcdPlayerState>;

// @beta
export const CmcdReportingMode: {
    readonly REQUEST: typeof CMCD_REQUEST_MODE;
    readonly RESPONSE: typeof CMCD_RESPONSE_MODE;
    readonly EVENT: typeof CMCD_EVENT_MODE;
};

// @beta (undocumented)
export type CmcdReportingMode = ValueOf<typeof CmcdReportingMode>;

// @beta
export type CmcdReportTarget = {
    url: string;
    reportingMode?: CmcdReportingMode;
    method?: 'GET' | 'POST';
    version?: number;
    transmissionMode?: CmcdTransmissionMode;
    enabledKeys?: CmcdKey[];
};

// @beta
export type CmcdRequest = Omit<Cmcd, 'nrr'> & {
    ab?: number;
    tbl?: number;
    cdn?: string;
    ltc?: number;
    bg?: boolean;
    sta?: CmcdPlayerState;
    pb?: number;
    ts?: number;
    tpb?: number;
    lb?: number;
    tab?: number;
    lab?: number;
    pt?: number;
    ec?: string | string[];
    msd?: number;
    sn?: number;
    bsd?: number;
    df?: number;
    cs?: number;
};

// @beta
export type CmcdResponse = CmcdRequest & {
    rc?: number;
    ttfb?: number;
    ttfbb?: number;
    ttlb?: number;
    url?: string;
    cmsdd?: string;
    cmsds?: string;
    smrt?: number;
};

// @beta
export const CmcdStreamingFormat: typeof CmStreamingFormat;

// @beta (undocumented)
export type CmcdStreamingFormat = CmStreamingFormat;

// @beta
export const CmcdStreamType: typeof CmStreamType;

// @beta (undocumented)
export type CmcdStreamType = CmStreamType;

// @beta
export const CmcdTransmissionMode: {
    readonly JSON: typeof CMCD_JSON;
    readonly QUERY: typeof CMCD_QUERY;
    readonly HEADERS: typeof CMCD_HEADERS;
};

// @beta (undocumented)
export type CmcdTransmissionMode = ValueOf<typeof CmcdTransmissionMode>;

// @beta
export type CmcdValue = CmcdObjectType | CmcdStreamingFormat | CmcdStreamType | string | string[] | number | number[] | boolean | symbol | SfToken | SfItem | SfItem[];

// @beta
export function decodeCmcd<T extends CmcdData = CmcdData>(cmcd: string): T;

// @beta
export function encodeCmcd(cmcd: CmcdData, options?: CmcdEncodeOptions): string;

// @beta
export function fromCmcdHeaders(headers: Record<string, string> | Headers): CmcdData;

// @beta
export function fromCmcdQuery(query: string | URLSearchParams): Cmcd;

// @beta
export function fromCmcdUrl(url: string): Cmcd;

// @beta
export function groupCmcdHeaders(cmcd: CmcdData, customHeaderMap?: Partial<CmcdHeaderMap>): Record<CmcdHeaderField, CmcdData>;

// @beta
export function isCmcdCustomKey(key: CmcdKey): boolean;

// @beta
export function isCmcdEventKey(key: string): key is keyof CmcdEvent;

// @beta
export function isCmcdRequestKey(key: string): key is keyof CmcdRequest;

// @beta
export function isCmcdResponseKey(key: string): key is keyof CmcdResponse;

// @beta
export function isCmcdV1Key(key: string): key is keyof Cmcd;

// @beta
export function prepareCmcdData(obj: Record<string, any>, options?: CmcdEncodeOptions): CmcdData;

// @beta
export function toCmcdHeaders(cmcd: CmcdData, options?: CmcdEncodeOptions): Record<CmcdHeaderField, string>;

// @beta @deprecated
export function toCmcdJson(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @beta
export function toCmcdQuery(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @beta
export function toCmcdReport(data: CmcdData, target: CmcdReportTarget): Request_2<{
    cmcd: Cmcd;
}> | null;

// @beta
export function toCmcdUrl(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

```
