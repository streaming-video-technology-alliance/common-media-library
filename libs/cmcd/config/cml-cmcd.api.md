## API Report File for "@svta/cml-cmcd"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { CmObjectType } from '@svta/cml-cta';
import { CmStreamingFormat } from '@svta/cml-cta';
import { CmStreamType } from '@svta/cml-cta';
import { ExclusiveRecord } from '@svta/cml-utils';
import { Request as Request_2 } from '@svta/cml-utils';
import { SfBareItem } from '@svta/cml-structured-field-values';
import { SfItem } from '@svta/cml-structured-field-values';
import { SfToken } from '@svta/cml-structured-field-values';
import { ValueOf } from '@svta/cml-utils';
import { ValueOrArray } from '@svta/cml-utils';

// @public
export function appendCmcdHeaders(headers: Record<string, string>, cmcd: Cmcd, options?: CmcdEncodeOptions): Record<string, string>;

// @public
export function appendCmcdQuery(url: string, cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @public
export type Cmcd = CmcdRequest & CmcdResponse & CmcdEvent;

// @public
export const CMCD_COMMON_KEYS: readonly ["ab", "bg", "bl", "br", "bs", "bsa", "bsd", "bsda", "cdn", "cid", "cs", "dfa", "ec", "h", "lab", "lb", "ltc", "msd", "mtp", "nr", "pb", "pr", "pt", "sf", "sid", "sn", "st", "sta", "tab", "tb", "tbl", "tpb", "ts", "v"];

// @public
export const CMCD_DEFAULT_TIME_INTERVAL = 30;

// @public
export const CMCD_EVENT_AD_BREAK_END: "abe";

// @public
export const CMCD_EVENT_AD_BREAK_START: "abs";

// @public
export const CMCD_EVENT_AD_END: "ae";

// @public
export const CMCD_EVENT_AD_START: "as";

// @public
export const CMCD_EVENT_BACKGROUNDED_MODE: "b";

// @public
export const CMCD_EVENT_BITRATE_CHANGE: "br";

// @public
export const CMCD_EVENT_CONTENT_ID: "c";

// @public
export const CMCD_EVENT_CUSTOM_EVENT: "ce";

// @public
export const CMCD_EVENT_ERROR: "e";

// @public
export const CMCD_EVENT_KEYS: readonly ["cen", "e"];

// @public
export const CMCD_EVENT_MODE: "event";

// @public
export const CMCD_EVENT_MUTE: "m";

// @public
export const CMCD_EVENT_PLAY_STATE: "ps";

// @public
export const CMCD_EVENT_PLAYER_COLLAPSE: "pc";

// @public
export const CMCD_EVENT_PLAYER_EXPAND: "pe";

// @public
export const CMCD_EVENT_RESPONSE_RECEIVED: "rr";

// @public
export const CMCD_EVENT_SKIP: "sk";

// @public
export const CMCD_EVENT_TIME_INTERVAL: "t";

// @public
export const CMCD_EVENT_UNMUTE: "um";

// @public
export const CMCD_FORMATTER_MAP: Record<string, CmcdFormatter>;

// @public
export const CMCD_HEADERS: "headers";

// @public @deprecated
export const CMCD_JSON: "json";

// @public
export const CMCD_KEYS: CmcdKey[];

// @public
export const CMCD_OBJECT: "CMCD-Object";

// @public
export const CMCD_PARAM = "CMCD";

// @public
export const CMCD_QUERY: "query";

// @public
export const CMCD_REQUEST: "CMCD-Request";

// @public
export const CMCD_REQUEST_KEYS: readonly ["d", "dl", "nor", "ot", "rtp", "su"];

// @public
export const CMCD_REQUEST_MODE: "request";

// @public
export const CMCD_RESPONSE_KEYS: readonly ["cmsdd", "cmsds", "rc", "smrt", "ttfb", "ttfbb", "ttlb", "url"];

// @public
export const CMCD_SESSION: "CMCD-Session";

// @public
export const CMCD_STATUS: "CMCD-Status";

// @public
export const CMCD_V1: 1;

// @public
export const CMCD_V1_KEYS: readonly ["bl", "br", "bs", "cid", "d", "dl", "mtp", "nor", "nrr", "ot", "pr", "rtp", "sf", "sid", "st", "su", "tb", "v"];

// @public
export const CMCD_V2: 2;

// @public
export type CmcdCustomKey = `${string}-${string}`;

// @public
export type CmcdEncodeOptions = {
    version?: number;
    reportingMode?: CmcdReportingMode;
    formatters?: Partial<CmcdFormatterMap>;
    customHeaderMap?: Partial<CmcdHeaderMap>;
    filter?: (key: CmcdKey) => boolean;
    baseUrl?: string;
    events?: string[];
};

// @public @deprecated
export const CmcdEncoding: typeof CmcdTransmissionMode;

// @public (undocumented)
export type CmcdEncoding = ValueOf<typeof CmcdEncoding>;

// @public
export type CmcdEvent = CmcdRequest & {
    cen?: string;
    e?: CmcdEventType;
    h?: string;
    ts?: number;
};

// @public
export type CmcdEventReportConfig = CmcdReportConfig & {
    version?: typeof CMCD_V2;
    url: string;
    events?: CmcdEventType[];
    interval?: number;
    batchSize?: number;
};

// @public
export const CmcdEventType: {
    readonly BITRATE_CHANGE: typeof CMCD_EVENT_BITRATE_CHANGE;
    readonly PLAY_STATE: typeof CMCD_EVENT_PLAY_STATE;
    readonly ERROR: typeof CMCD_EVENT_ERROR;
    readonly TIME_INTERVAL: typeof CMCD_EVENT_TIME_INTERVAL;
    readonly CONTENT_ID: typeof CMCD_EVENT_CONTENT_ID;
    readonly BACKGROUNDED_MODE: typeof CMCD_EVENT_BACKGROUNDED_MODE;
    readonly MUTE: typeof CMCD_EVENT_MUTE;
    readonly UNMUTE: typeof CMCD_EVENT_UNMUTE;
    readonly PLAYER_EXPAND: typeof CMCD_EVENT_PLAYER_EXPAND;
    readonly PLAYER_COLLAPSE: typeof CMCD_EVENT_PLAYER_COLLAPSE;
    readonly RESPONSE_RECEIVED: typeof CMCD_EVENT_RESPONSE_RECEIVED;
    readonly AD_START: typeof CMCD_EVENT_AD_START;
    readonly AD_END: typeof CMCD_EVENT_AD_END;
    readonly AD_BREAK_START: typeof CMCD_EVENT_AD_BREAK_START;
    readonly AD_BREAK_END: typeof CMCD_EVENT_AD_BREAK_END;
    readonly SKIP: typeof CMCD_EVENT_SKIP;
    readonly CUSTOM_EVENT: typeof CMCD_EVENT_CUSTOM_EVENT;
};

// @public (undocumented)
export type CmcdEventType = ValueOf<typeof CmcdEventType>;

// @public
export type CmcdFormatter = (value: CmcdValue, options: CmcdFormatterOptions) => ValueOrArray<number> | ValueOrArray<string> | ValueOrArray<SfItem> | ValueOrArray<number | SfItem>;

// @public
export type CmcdFormatterMap = Record<CmcdKey, CmcdFormatter>;

// @public
export type CmcdFormatterOptions = {
    version: number;
    reportingMode: CmcdReportingMode;
    baseUrl?: string;
};

// @public @deprecated
export const CmcdFormatters: Record<string, CmcdFormatter>;

// @public
export const CmcdHeaderField: {
    readonly OBJECT: typeof CMCD_OBJECT;
    readonly REQUEST: typeof CMCD_REQUEST;
    readonly SESSION: typeof CMCD_SESSION;
    readonly STATUS: typeof CMCD_STATUS;
};

// @public (undocumented)
export type CmcdHeaderField = ValueOf<typeof CmcdHeaderField>;

// @public
export type CmcdHeaderMap = Record<CmcdHeaderField, CmcdKey[]>;

// @public @deprecated
export type CmcdHeadersMap = Record<CmcdHeaderField, CmcdKey[]>;

// @public
export type CmcdKey = keyof Cmcd | "nrr";

// @public
export const CmcdObjectType: typeof CmObjectType;

// @public (undocumented)
export type CmcdObjectType = CmObjectType;

// @public
export type CmcdObjectTypeList = ValueOrArray<number | SfItem<number, ExclusiveRecord<CmcdObjectType, boolean>>>;

// @public
export const CmcdPlayerState: {
    readonly STARTING: "s";
    readonly PLAYING: "p";
    readonly SEEKING: "k";
    readonly REBUFFERING: "r";
    readonly PAUSED: "a";
    readonly WAITING: "w";
    readonly ENDED: "e";
    readonly FATAL_ERROR: "f";
    readonly QUIT: "q";
    readonly PRELOADING: "d";
};

// @public (undocumented)
export type CmcdPlayerState = ValueOf<typeof CmcdPlayerState>;

// @public
export type CmcdReportConfig = {
    version?: CmcdVersion;
    enabledKeys?: CmcdKey[];
};

// @public
export class CmcdReporter {
    constructor(config: Partial<CmcdReporterConfig>, requester?: (request: Request_2) => Promise<{
        status: number;
    }>);
    applyRequestReport(req: Request_2): Request_2;
    flush(): void;
    recordEvent(type: CmcdEventType, data?: Partial<Cmcd>): void;
    start(): void;
    stop(): void;
    update(data: Partial<Cmcd>): void;
}

// @public
export type CmcdReporterConfig = CmcdRequestReportConfig & {
    sid?: string;
    cid?: string;
    eventTargets?: CmcdEventReportConfig[];
};

// @public
export const CmcdReportingMode: {
    readonly REQUEST: typeof CMCD_REQUEST_MODE;
    readonly EVENT: typeof CMCD_EVENT_MODE;
};

// @public (undocumented)
export type CmcdReportingMode = ValueOf<typeof CmcdReportingMode>;

// @public
export type CmcdRequest = {
    [index: CmcdCustomKey]: CmcdValue | undefined;
    ab?: CmcdObjectTypeList;
    bg?: boolean;
    bl?: CmcdObjectTypeList;
    br?: CmcdObjectTypeList;
    bs?: boolean;
    bsa?: CmcdObjectTypeList;
    bsd?: CmcdObjectTypeList;
    bsda?: CmcdObjectTypeList;
    cdn?: string;
    cid?: string;
    cs?: string;
    d?: number;
    dfa?: number;
    dl?: number;
    ec?: string[];
    lab?: CmcdObjectTypeList;
    lb?: CmcdObjectTypeList;
    ltc?: number;
    msd?: number;
    mtp?: CmcdObjectTypeList;
    nor?: ValueOrArray<string | SfItem<string, {
        r: string;
    }>>;
    nr?: boolean;
    ot?: CmcdObjectType;
    pb?: CmcdObjectTypeList;
    pr?: number;
    pt?: number;
    rtp?: number;
    sf?: CmcdStreamingFormat;
    sid?: string;
    sn?: number;
    st?: CmcdStreamType;
    sta?: CmcdPlayerState;
    su?: boolean;
    tab?: CmcdObjectTypeList;
    tb?: CmcdObjectTypeList;
    tbl?: CmcdObjectTypeList;
    tpb?: CmcdObjectTypeList;
    v?: number;
};

// @public @deprecated
export type CmcdRequestKey = keyof CmcdRequest;

// @public
export type CmcdRequestReportConfig = CmcdReportConfig & {
    transmissionMode?: CmcdTransmissionMode;
};

// @public
export type CmcdResponse = CmcdRequest & {
    cmsdd?: string;
    cmsds?: string;
    rc?: number;
    smrt?: string;
    ttfb?: number;
    ttfbb?: number;
    ttlb?: number;
    url?: string;
};

// @public
export const CmcdStreamingFormat: typeof CmStreamingFormat;

// @public (undocumented)
export type CmcdStreamingFormat = CmStreamingFormat;

// @public
export const CmcdStreamType: typeof CmStreamType;

// @public (undocumented)
export type CmcdStreamType = CmStreamType;

// @public
export const CmcdTransmissionMode: {
    readonly JSON: typeof CMCD_JSON;
    readonly QUERY: typeof CMCD_QUERY;
    readonly HEADERS: typeof CMCD_HEADERS;
};

// @public (undocumented)
export type CmcdTransmissionMode = ValueOf<typeof CmcdTransmissionMode>;

// @public
export type CmcdValue = CmcdObjectType | CmcdStreamingFormat | CmcdStreamType | string | string[] | number | number[] | boolean | symbol | SfToken | SfItem | SfItem[] | (number | SfItem)[];

// @public
export function decodeCmcd<T extends Cmcd = Cmcd>(cmcd: string): T;

// @public
export function encodeCmcd(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @public
export function fromCmcdHeaders(headers: Record<string, string> | Headers): Cmcd;

// @public
export function fromCmcdQuery(query: string | URLSearchParams): Cmcd;

// @public
export function fromCmcdUrl(url: string): Cmcd;

// @public
export function groupCmcdHeaders(cmcd: Cmcd, customHeaderMap?: Partial<CmcdHeaderMap>): Record<CmcdHeaderField, Cmcd>;

// @public
export function isCmcdCustomKey(key: CmcdKey): boolean;

// @public
export function isCmcdEventKey(key: string): key is keyof Cmcd;

// @public
export function isCmcdRequestKey(key: string): key is keyof Cmcd;

// @public
export function isCmcdResponseReceivedKey(key: string): key is keyof Cmcd;

// @public
export function isCmcdV1Key(key: string): key is CmcdKey;

// @public
export function prepareCmcdData(obj: Record<string, any>, options?: CmcdEncodeOptions): Cmcd;

// @public
export function toCmcdHeaders(cmcd: Cmcd, options?: CmcdEncodeOptions): Record<CmcdHeaderField, string>;

// @public @deprecated
export function toCmcdJson(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @public
export function toCmcdQuery(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @public
export function toCmcdUrl(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @public
export function toCmcdValue<V extends SfBareItem, P>(value: V, params?: P): SfItem<V, P>;

// Warnings were encountered during analysis:
//
// src/CmcdEventType.ts:64:1 - (ae-forgotten-export) The symbol "CmcdVersion" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
