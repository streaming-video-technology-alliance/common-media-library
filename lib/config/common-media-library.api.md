## API Report File for "@svta/common-media-library"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @alpha
export type AlignedSwitchingSet = {
    switchingSets: SwitchingSet[];
};

// @beta
export function appendCmcdHeaders(headers: Record<string, string>, cmcd: Cmcd, options?: CmcdEncodeOptions): Record<string, string>;

// @beta
export function appendCmcdQuery(url: string, cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @alpha
export type AudioTrack = Track & {
    sampleRate: number;
    channels: number;
};

// @beta
export function base64decode(str: string): Uint8Array;

// @beta
export function base64encode(binary: Uint8Array): string;

// @beta
export function canParseId3(data: Uint8Array, offset: number): boolean;

// @beta
export type CaptionModes = 'MODE_ROLL-UP' | 'MODE_POP-ON' | 'MODE_PAINT-ON' | 'MODE_TEXT' | null;

// @beta
export class CaptionScreen {
    constructor(logger?: CaptionsLogger);
    // (undocumented)
    backSpace(): void;
    // (undocumented)
    clearToEndOfRow(): void;
    // (undocumented)
    copy(other: CaptionScreen): void;
    // (undocumented)
    equals(other: CaptionScreen): boolean;
    getDisplayText(asOneRow?: boolean): string;
    // (undocumented)
    getTextAndFormat(): Row[];
    insertChar(char: number): void;
    // (undocumented)
    isEmpty(): boolean;
    // (undocumented)
    moveCursor(relPos: number): void;
    // (undocumented)
    reset(): void;
    // (undocumented)
    rollUp(): void;
    setBkgData(bkgData: Partial<PenStyles>): void;
    // (undocumented)
    setCursor(absPos: number): void;
    // (undocumented)
    setPAC(pacData: PACData): void;
    // (undocumented)
    setPen(styles: Partial<PenStyles>): void;
    // (undocumented)
    setRollUpRows(nrRows: number | null): void;
}

// @beta
export class CaptionsLogger {
    // (undocumented)
    log(severity: VerboseLevel, msg: string | (() => string)): void;
    // (undocumented)
    time: number | null;
    // (undocumented)
    verboseLevel: VerboseLevel;
}

// @beta
export type Cmcd = {
    [index: CmcdCustomKey]: CmcdValue;
    br?: number;
    d?: number;
    ot?: CmcdObjectType;
    tb?: number;
    bl?: number;
    dl?: number;
    mtp?: number;
    nor?: string;
    nrr?: string;
    su?: boolean;
    cid?: string;
    pr?: number;
    sf?: CmcdStreamingFormat;
    sid?: string;
    st?: CmcdStreamType;
    v?: number;
    bs?: boolean;
    rtp?: number;
};

// @beta
export const CMCD_HEADERS = "headers";

// @beta
export const CMCD_JSON = "json";

// @beta
export const CMCD_OBJECT = "CMCD-Object";

// @beta
export const CMCD_PARAM = "CMCD";

// @beta
export const CMCD_QUERY = "query";

// @beta
export const CMCD_REQUEST = "CMCD-Request";

// @beta
export const CMCD_SESSION = "CMCD-Session";

// @beta
export const CMCD_STATUS = "CMCD-Status";

// @beta
export const CMCD_V1 = 1;

// @beta
export type CmcdCustomKey = `${string}-${string}`;

// @beta
export type CmcdEncodeOptions = {
    formatters?: Record<CmcdKey, CmcdFormatter>;
    customHeaderMap?: CmcdHeadersMap;
    filter?: (key: CmcdKey) => boolean;
    baseUrl?: string;
};

// @beta
export const CmcdEncoding: {
    readonly JSON: typeof CMCD_JSON;
    readonly QUERY: typeof CMCD_QUERY;
    readonly HEADERS: typeof CMCD_HEADERS;
};

// Warning: (ae-forgotten-export) The symbol "ValueOf" needs to be exported by the entry point index.d.ts
//
// @beta (undocumented)
export type CmcdEncoding = ValueOf<typeof CmcdEncoding>;

// @beta
export type CmcdFormatter = (value: CmcdValue, options?: CmcdEncodeOptions) => string | number;

// @beta
export const CmcdFormatters: Record<string, CmcdFormatter>;

// @beta
export const CmcdHeaderField: {
    readonly OBJECT: typeof CMCD_OBJECT;
    readonly REQUEST: typeof CMCD_REQUEST;
    readonly SESSION: typeof CMCD_SESSION;
    readonly STATUS: typeof CMCD_STATUS;
};

// @beta (undocumented)
export type CmcdHeaderField = ValueOf<typeof CmcdHeaderField>;

// @beta
export type CmcdHeadersMap = Record<CmcdHeaderField, CmcdKey[]>;

// @beta
export type CmcdKey = keyof Cmcd;

// Warning: (ae-forgotten-export) The symbol "CmObjectType" needs to be exported by the entry point index.d.ts
//
// @beta
export const CmcdObjectType: typeof CmObjectType;

// @beta (undocumented)
export type CmcdObjectType = CmObjectType;

// Warning: (ae-forgotten-export) The symbol "CmStreamingFormat" needs to be exported by the entry point index.d.ts
//
// @beta
export const CmcdStreamingFormat: typeof CmStreamingFormat;

// @beta (undocumented)
export type CmcdStreamingFormat = CmStreamingFormat;

// Warning: (ae-forgotten-export) The symbol "CmStreamType" needs to be exported by the entry point index.d.ts
//
// @beta
export const CmcdStreamType: typeof CmStreamType;

// @beta (undocumented)
export type CmcdStreamType = CmStreamType;

// @beta
export type CmcdValue = CmcdObjectType | CmcdStreamingFormat | CmcdStreamType | string | number | boolean | symbol | SfToken;

// Warning: (ae-internal-missing-underscore) The name "CmCustomKey" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export type CmCustomKey = `${string}-${string}`;

// @beta
export const CMSD_DYNAMIC = "CMSD-Dynamic";

// @beta
export const CMSD_STATIC = "CMSD-Static";

// @beta
export const CMSD_V1 = 1;

// @beta
export type CmsdCustomKey = `${string}-${string}`;

// @beta
export type CmsdDynamic = {
    value: string;
    params: CmsdDynamicParams;
};

// @beta
export type CmsdDynamicParams = {
    [index: CmsdCustomKey]: CmsdValue;
    du?: boolean;
    etp?: number;
    mb?: number;
    rd?: number;
    rtt?: number;
};

// @beta
export type CmsdEncodeOptions = {
    useSymbol?: boolean;
};

// @beta
export const CmsdHeaderField: {
    readonly STATIC: typeof CMSD_STATIC;
    readonly DYNAMIC: typeof CMSD_DYNAMIC;
};

// @beta (undocumented)
export type CmsdHeaderField = ValueOf<typeof CmsdHeaderField>;

// @beta
export const CmsdObjectType: typeof CmObjectType;

// @beta (undocumented)
export type CmsdObjectType = CmObjectType;

// @beta
export type CmsdStatic = {
    [index: CmsdCustomKey]: CmsdValue;
    at?: number;
    br?: number;
    d?: number;
    ht?: number;
    n?: string;
    nor?: string;
    nrr?: string;
    ot?: CmsdObjectType;
    sf?: CmsdStreamingFormat;
    st?: CmsdStreamType;
    su?: boolean;
    v?: number;
};

// @beta
export const CmsdStreamingFormat: typeof CmStreamingFormat;

// @beta (undocumented)
export type CmsdStreamingFormat = CmStreamingFormat;

// @beta
export const CmsdStreamType: typeof CmStreamType;

// @beta (undocumented)
export type CmsdStreamType = CmStreamType;

// @beta
export type CmsdValue = CmsdObjectType | CmsdStreamingFormat | CmsdStreamType | string | number | boolean | symbol | SfToken;

// Warning: (ae-internal-missing-underscore) The name "CmValue" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export type CmValue = CmObjectType | CmStreamingFormat | CmStreamType | string | number | boolean | symbol | SfToken;

// @beta
export type CommonMediaRequest = {
    url: string;
    method: string;
    responseType?: string;
    headers?: Record<string, string>;
    credentials?: RequestCredentials;
    mode?: RequestMode;
    timeout?: number;
    cmcd?: Cmcd;
    customData?: any;
};

// @beta
export type CommonMediaResponse = {
    request: CommonMediaRequest;
    url?: string;
    redirected?: boolean;
    status?: number;
    statusText?: string;
    type?: string;
    headers?: Record<string, string>;
    data?: any;
    resourceTiming: ResourceTiming;
};

// @beta
export class Cta608Channel {
    constructor(channelNumber: number, outputFilter: CueHandler, logger?: CaptionsLogger);
    // (undocumented)
    ccAOF(): void;
    // (undocumented)
    ccAON(): void;
    // (undocumented)
    ccBS(): void;
    // (undocumented)
    ccCR(): void;
    // (undocumented)
    ccDER(): void;
    // (undocumented)
    ccEDM(): void;
    // (undocumented)
    ccENM(): void;
    // (undocumented)
    ccEOC(): void;
    // (undocumented)
    ccFON(): void;
    // (undocumented)
    ccMIDROW(secondByte: number): void;
    // (undocumented)
    ccRCL(): void;
    // (undocumented)
    ccRDC(): void;
    // (undocumented)
    ccRTD(): void;
    // (undocumented)
    ccRU(nrRows: number | null): void;
    // (undocumented)
    ccTO(nrCols: number): void;
    // (undocumented)
    ccTR(): void;
    // (undocumented)
    cueSplitAtTime(t: number): void;
    // (undocumented)
    insertChars(chars: number[]): void;
    // (undocumented)
    outputDataUpdate(dispatch?: boolean): void;
    // (undocumented)
    reset(): void;
    // (undocumented)
    setBkgData(bkgData: Partial<PenStyles>): void;
    // (undocumented)
    setMode(newMode: CaptionModes): void;
    // (undocumented)
    setPAC(pacData: PACData): void;
}

// @beta
export class Cta608Parser {
    constructor(field: SupportedField, out1: any, out2: any);
    addData(time: number | null, byteList: number[]): void;
    cueSplitAtTime(t: number): void;
    reset(): void;
}

// @beta
export type CueHandler = {
    newCue(startTime: number, endTime: number, screen: CaptionScreen): void;
    reset?(): void;
    dispatchCue?(): void;
};

// @alpha
export type DashManifest = {
    MPD: {
        $?: {
            maxSegmentDuration?: string;
            mediaPresentationDuration?: string;
            minBufferTime?: string;
            profiles?: string;
            type?: string;
            xmlns?: string;
        };
        Period: Period[];
    };
};

// @alpha
export function dashToHam(manifest: string): Presentation[];

// @beta
export function decodeCmcd(cmcd: string): Cmcd;

// @beta
export function decodeCmsdDynamic(cmsd: string): CmsdDynamic[];

// @beta
export function decodeCmsdStatic(cmsd: string): CmsdStatic;

// @beta
export type DecodedId3Frame<T> = {
    key: string;
    data: T;
    info?: any;
};

// @beta
export function decodeSfDict(input: string, options?: SfDecodeOptions): SfDictionary;

// @beta
export function decodeSfItem(input: string, options?: SfDecodeOptions): SfItem;

// @beta
export function decodeSfList(input: string, options?: SfDecodeOptions): SfMember[];

// @beta
export function encodeCmcd(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @beta
export function encodeCmsdDynamic(value: SfItem[]): string;

// @beta
export function encodeCmsdDynamic(value: string, cmsd: CmsdDynamic): string;

// @beta
export function encodeCmsdStatic(cmsd: CmsdStatic, options?: CmsdEncodeOptions): string;

// @beta
export function encodeSfDict(value: Record<string, any> | Map<string, any>, options?: SfEncodeOptions): string;

// @beta
export function encodeSfItem(value: SfItem): string;

// @beta
export function encodeSfItem(value: SfBareItem, params?: SfParameters): string;

// @beta
export function encodeSfList(value: SfMember[], options?: SfEncodeOptions): string;

// @beta
export function extractCta608Data(raw: DataView, cta608Range: Array<number>): Array<Array<number>>;

// @beta
export function findCta608Nalus(raw: DataView, startPos: number, size: number): Array<Array<number>>;

// @alpha
export type FrameRate = {
    frameRateNumerator: number;
    frameRateDenominator?: number;
};

// @beta
export function fromCmcdHeaders(headers: Record<string, string> | Headers): Cmcd;

// @beta
export function fromCmcdQuery(query: string | URLSearchParams): Cmcd;

// Warning: (ae-internal-missing-underscore) The name "getId3Data" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function getId3Data(data: Uint8Array, offset: number): Uint8Array | undefined;

// @beta
export function getId3Frames(id3Data: Uint8Array): Id3Frame[];

// @beta
export function getId3Timestamp(data: Uint8Array): number | undefined;

// @alpha
export function getTracksFromPresentation(presentation: Presentation, predicate?: (track: Track) => boolean): Track[];

// @alpha
export function getTracksFromSelectionSet(selectionSet: SelectionSet, predicate?: (track: Track) => boolean): Track[];

// @alpha
export function getTracksFromSwitchingSet(switchingSet: SwitchingSet, predicate?: (track: Track) => boolean): Track[];

// @alpha
export type Ham = {
    id: string;
};

// @alpha
export function hamToDash(presentation: Presentation[]): Manifest;

// @alpha
export function hamToHls(presentation: Presentation[]): Manifest;

// @alpha
export type HlsManifest = {
    playlists: PlayList[];
    mediaGroups: MediaGroups;
    segments: SegmentHls[];
    targetDuration?: number;
};

// @alpha
export function hlsToHam(manifest: string, ancillaryManifests: string[]): Presentation[];

// @beta
export type Id3Frame = DecodedId3Frame<ArrayBuffer | string | number>;

// Warning: (ae-internal-missing-underscore) The name "isId3TimestampFrame" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export function isId3TimestampFrame(frame: Id3Frame): boolean;

// @alpha
export type Manifest = {
    manifest: string;
    fileName?: string;
    ancillaryManifests?: Manifest[];
    type: ManifestFormat;
    metadata?: Map<string, string>;
};

// @alpha
export type ManifestFormat = 'hls' | 'dash';

// @beta
export type PACData = {
    row: number;
    indent: number | null;
    color: string | null;
    underline: boolean;
    italics: boolean;
};

// @beta
export class PenState {
    // (undocumented)
    background: string;
    // (undocumented)
    copy(newPenState: PenState): void;
    // (undocumented)
    equals(other: PenState): boolean;
    // (undocumented)
    flash: boolean;
    // (undocumented)
    foreground: string;
    // (undocumented)
    isDefault(): boolean;
    // (undocumented)
    italics: boolean;
    // (undocumented)
    reset(): void;
    // (undocumented)
    setStyles(styles: Partial<PenStyles>): void;
    // (undocumented)
    underline: boolean;
}

// @beta
export type PenStyles = {
    foreground: string | null;
    underline: boolean;
    italics: boolean;
    background: string;
    flash: boolean;
};

// @alpha
export type Presentation = Ham & {
    selectionSets: SelectionSet[];
};

// @beta
export function processUriTemplate(uriTemplate: string, representationId: string | null | undefined, number: number | null | undefined, subNumber: number | null | undefined, bandwidth: number | null | undefined, time: number | null | undefined): string;

// @beta
export type RequestInterceptor = (request: CommonMediaRequest) => Promise<CommonMediaRequest>;

// @beta
export type ResourceTiming = {
    startTime: number;
    encodedBodySize: number;
    responseStart?: number;
    responseEnd?: number;
    duration?: number;
};

// @beta
export type ResponseInterceptor = (response: CommonMediaResponse) => Promise<CommonMediaResponse>;

// @beta
export function roundToEven(value: number, precision: number): number;

// @beta
export class Row {
    constructor(logger?: CaptionsLogger);
    backSpace(): void;
    // (undocumented)
    chars: StyledUnicodeChar[];
    // (undocumented)
    clear(): void;
    // (undocumented)
    clearFromPos(startPos: number): void;
    // (undocumented)
    clearToEndOfRow(): void;
    // (undocumented)
    copy(other: Row): void;
    // (undocumented)
    cueStartTime: number | null;
    // (undocumented)
    equals(other: Row): boolean;
    // (undocumented)
    getTextString(): string;
    // (undocumented)
    insertChar(byte: number): void;
    // (undocumented)
    isEmpty(): boolean;
    moveCursor(relPos: number): void;
    setCursor(absPos: number): void;
    // (undocumented)
    setPenStyles(styles: Partial<PenStyles>): void;
}

// @beta
export class SccParser {
    constructor(processor: any, field?: number | any);
    // (undocumented)
    field: number | any;
    // (undocumented)
    getField(): number | any;
    // (undocumented)
    getHeaderStatus(): boolean;
    // (undocumented)
    getLinesParsed(): number;
    // (undocumented)
    hasHeader: boolean;
    // (undocumented)
    nrLinesParsed: number;
    // (undocumented)
    parse(text: string): void;
    // (undocumented)
    parseDataLine(line: string): [number, number[]] | null;
    // (undocumented)
    processor: any;
    // (undocumented)
    timeConverter(smpteTs: string): number;
}

// @alpha
export type Segment = {
    duration: number;
    url: string;
    byteRange?: string;
};

// @alpha
export type SelectionSet = Ham & {
    switchingSets: SwitchingSet[];
    alignedSwitchingSets?: AlignedSwitchingSet[];
};

// Warning: (ae-forgotten-export) The symbol "DashParser" needs to be exported by the entry point index.d.ts
// Warning: (ae-internal-missing-underscore) The name "setDashParser" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function setDashParser(parser: DashParser): void;

// Warning: (ae-forgotten-export) The symbol "DashSerializer" needs to be exported by the entry point index.d.ts
// Warning: (ae-internal-missing-underscore) The name "setDashSerializer" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function setDashSerializer(serializer: DashSerializer): void;

// Warning: (ae-forgotten-export) The symbol "HlsParser" needs to be exported by the entry point index.d.ts
// Warning: (ae-internal-missing-underscore) The name "setHlsParser" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export function setHlsParser(parser: HlsParser): void;

// @beta
export type SfBareItem = string | Uint8Array | boolean | number | symbol | Date | SfToken;

// @beta
export type SfDecodeOptions = {
    useSymbol?: boolean;
};

// @beta
export type SfDictionary = Record<string, SfMember> | Map<string, SfMember>;

// @beta
export type SfEncodeOptions = {
    whitespace?: boolean;
};

// @beta
export type SfInnerList = {
    value: SfItem[] | SfBareItem[];
    params: SfParameters;
};

// @beta
export class SfItem {
    constructor(value: any, params?: SfParameters);
    // (undocumented)
    params?: SfParameters;
    // (undocumented)
    value: SfBareItem;
}

// @beta
export type SfMember = SfItem | SfInnerList | SfBareItem;

// @beta
export type SfParameters = Record<string, any>;

// @beta
export class SfToken {
    constructor(description: string);
    // (undocumented)
    description: string;
}

// @beta
export class StyledUnicodeChar {
    // (undocumented)
    copy(newChar: StyledUnicodeChar): void;
    // (undocumented)
    equals(other: StyledUnicodeChar): boolean;
    // (undocumented)
    isEmpty(): boolean;
    // (undocumented)
    penState: PenState;
    // (undocumented)
    reset(): void;
    // (undocumented)
    setChar(uchar: string, newPenState: PenState): void;
    // (undocumented)
    setPenState(newPenState: PenState): void;
    // (undocumented)
    uchar: string;
}

// @beta
export type SupportedField = 1 | 3;

// @alpha
export type SwitchingSet = Ham & {
    tracks: Track[];
};

// @alpha
type TextTrack_2 = Track;
export { TextTrack_2 as TextTrack }

// @beta
export function toCmcdHeaders(cmcd: Cmcd, options?: CmcdEncodeOptions): Record<CmcdHeaderField, string>;

// @beta
export function toCmcdJson(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @beta
export function toCmcdQuery(cmcd: Cmcd, options?: CmcdEncodeOptions): string;

// @alpha
export type Track = Ham & {
    type: TrackType;
    fileName?: string;
    codec: string;
    duration: number;
    language: string;
    bandwidth: number;
    byteRange?: string;
    urlInitialization?: string;
    segments: Segment[];
};

// @alpha
export type TrackType = 'audio' | 'video' | 'text';

// @beta
export function urlToRelativePath(url: string, base: string): string;

// @beta
export function utf8ArrayToStr(array: Uint8Array, exitOnNull?: boolean): string;

// @beta
export function uuid(): string;

// @alpha
export function validatePresentation(presentation: Presentation): Validation;

// @alpha
export function validateSegment(segment: Segment, trackId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateSegments(segments: Segment[], trackId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateSelectionSet(selectionSet: SelectionSet, presentationId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateSelectionSets(selectionSets: SelectionSet[], presentationId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateSwitchingSet(switchingSet: SwitchingSet, selectionSetId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateSwitchingSets(switchingSets: SwitchingSet[], selectionSetId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateTrack(track: Track, switchingSetId?: string, prevValidation?: Validation): Validation;

// @alpha
export function validateTracks(tracks: Track[], switchingSetId?: string, prevValidation?: Validation): Validation;

// @alpha
export type Validation = {
    status: boolean;
    errorMessages: string[];
};

// @beta
export const VerboseLevel: {
    readonly ERROR: 0;
    readonly TEXT: 1;
    readonly WARNING: 2;
    readonly INFO: 2;
    readonly DEBUG: 3;
    readonly DATA: 3;
};

// @beta (undocumented)
export type VerboseLevel = ValueOf<typeof VerboseLevel>;

// @alpha
export type VideoTrack = Track & {
    width: number;
    height: number;
    frameRate: FrameRate;
    par: string;
    sar: string;
    scanType: string;
};

// Warnings were encountered during analysis:
//
// src/cmaf/ham/types/mapper/dash/DashManifest.ts:19:3 - (ae-forgotten-export) The symbol "Period" needs to be exported by the entry point index.d.ts
// src/cmaf/ham/types/mapper/hls/HlsManifest.ts:12:2 - (ae-forgotten-export) The symbol "PlayList" needs to be exported by the entry point index.d.ts
// src/cmaf/ham/types/mapper/hls/HlsManifest.ts:13:2 - (ae-forgotten-export) The symbol "MediaGroups" needs to be exported by the entry point index.d.ts
// src/cmaf/ham/types/mapper/hls/HlsManifest.ts:14:2 - (ae-forgotten-export) The symbol "SegmentHls" needs to be exported by the entry point index.d.ts

```
